/***********************************************************
 * File generated by the HALCON-Compiler hcomp version 23.11
 * Usage: Interface to C
 *
 * Software by: MVTec Software GmbH, www.mvtec.com
 ***********************************************************/


#ifndef __APPLE__
#  include "HalconC.h"
#else
#  ifndef HC_LARGE_IMAGES
#    include <HALCONC/HalconC.h>
#  else
#    include <HALCONCxl/HalconC.h>
#  endif
#endif


extern HUserImport int HHalcon_HikGetOffset();

int offset = -1;

Herror HcPreCallUser(int proc_index_local, Hproc_handle *proc_handle)
{
  Hproc_handle ph;
  if (offset < 0)
  {
    /* First use of this extension package, query my offset */
    offset = HHalcon_HikGetOffset();
    if (offset < 0)
    {
      /* HALCON library not initialized (extension package as first usage). */
      /* Trigger initialization by touching system operator and try again. */
      HcPreCall(0,&ph);
      HcPostCall(ph,H_MSG_OK);
      offset = HHalcon_HikGetOffset();
      if (offset < 0)
      {
        /* Ok, so something is *really* wrong */
        *proc_handle = NULL;
        return H_ERR_UEXTNI;
      }
    }
  }
  return HcPreCall(offset + proc_index_local, proc_handle);
}

HUserExport Herror T_Hik_openCaptureCard(const Htuple nDeviceIndex, const Htuple Name)
{
  Hproc_handle ph;
  Herror err = H_MSG_OK;

  err = HcPreCallUser(0,&ph);
  if (err == H_MSG_OK) err = HcStoreICT(ph,0,&nDeviceIndex);
  if (err == H_MSG_OK) err = HcStoreICTEnc(ph,1,&Name);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror T_Hik_SetBoolParameters(const Htuple nDeviceIndex, const Htuple strKey, const Htuple nValue)
{
  Hproc_handle ph;
  Herror err = H_MSG_OK;

  err = HcPreCallUser(1,&ph);
  if (err == H_MSG_OK) err = HcStoreICT(ph,0,&nDeviceIndex);
  if (err == H_MSG_OK) err = HcStoreICTEnc(ph,1,&strKey);
  if (err == H_MSG_OK) err = HcStoreICT(ph,2,&nValue);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror T_Hik_openCamera(const Htuple Name, const Htuple TimeSharingFlicker, const Htuple QueueHandle, Htuple *CameraHandle)
{
  Hproc_handle ph;
  Herror err = H_MSG_OK;

  err = HcPreCallUser(2,&ph);
  if (err == H_MSG_OK) err = HcStoreICTEnc(ph,0,&Name);
  if (err == H_MSG_OK) err = HcStoreICT(ph,1,&TimeSharingFlicker);
  if (err == H_MSG_OK) err = HcStoreICT(ph,2,&QueueHandle);
  if (err == H_MSG_OK)
  {
    HcInitOCT(ph,0,CameraHandle);
    err = HcCall(ph);
  }
  err = HcStoreOCT(ph,0,CameraHandle,err);
  return HcPostCall(ph,err);
}

HUserExport Herror T_Hik_SetEnumsParameters(const Htuple nDeviceIndex, const Htuple strKey, const Htuple nValue)
{
  Hproc_handle ph;
  Herror err = H_MSG_OK;

  err = HcPreCallUser(3,&ph);
  if (err == H_MSG_OK) err = HcStoreICT(ph,0,&nDeviceIndex);
  if (err == H_MSG_OK) err = HcStoreICTEnc(ph,1,&strKey);
  if (err == H_MSG_OK) err = HcStoreICT(ph,2,&nValue);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror T_Hik_SetIntParameters(const Htuple nDeviceIndex, const Htuple strKey, const Htuple nValue)
{
  Hproc_handle ph;
  Herror err = H_MSG_OK;

  err = HcPreCallUser(4,&ph);
  if (err == H_MSG_OK) err = HcStoreICT(ph,0,&nDeviceIndex);
  if (err == H_MSG_OK) err = HcStoreICTEnc(ph,1,&strKey);
  if (err == H_MSG_OK) err = HcStoreICT(ph,2,&nValue);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror T_Hik_SetCommandParameters(const Htuple nDeviceIndex, const Htuple strKey)
{
  Hproc_handle ph;
  Herror err = H_MSG_OK;

  err = HcPreCallUser(5,&ph);
  if (err == H_MSG_OK) err = HcStoreICT(ph,0,&nDeviceIndex);
  if (err == H_MSG_OK) err = HcStoreICTEnc(ph,1,&strKey);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror T_Hik_SetfloatParameters(const Htuple nDeviceIndex, const Htuple strKey, const Htuple fValue)
{
  Hproc_handle ph;
  Herror err = H_MSG_OK;

  err = HcPreCallUser(6,&ph);
  if (err == H_MSG_OK) err = HcStoreICT(ph,0,&nDeviceIndex);
  if (err == H_MSG_OK) err = HcStoreICTEnc(ph,1,&strKey);
  if (err == H_MSG_OK) err = HcStoreICT(ph,2,&fValue);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror T_Hik_StartPhotograph(const Htuple nDeviceIndex)
{
  Hproc_handle ph;
  Herror err = H_MSG_OK;

  err = HcPreCallUser(7,&ph);
  if (err == H_MSG_OK) err = HcStoreICT(ph,0,&nDeviceIndex);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror T_Hik_closeCamera(const Htuple nDeviceIndex)
{
  Hproc_handle ph;
  Herror err = H_MSG_OK;

  err = HcPreCallUser(8,&ph);
  if (err == H_MSG_OK) err = HcStoreICT(ph,0,&nDeviceIndex);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror T_Hik_StopPhotograph(const Htuple nDeviceIndex)
{
  Hproc_handle ph;
  Herror err = H_MSG_OK;

  err = HcPreCallUser(9,&ph);
  if (err == H_MSG_OK) err = HcStoreICT(ph,0,&nDeviceIndex);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror Hik_openCaptureCard(Hlong nDeviceIndex, const char *Name)
{
  Hproc_handle ph;
  Herror err;
  err = HcPreCallUser(0,&ph);
  if (err == H_MSG_OK) HcStoreICL(ph,0,nDeviceIndex);
  if (err == H_MSG_OK) HcStoreICSEnc(ph,1,Name);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror Hik_SetBoolParameters(Hlong nDeviceIndex, const char *strKey, Hlong nValue)
{
  Hproc_handle ph;
  Herror err;
  err = HcPreCallUser(1,&ph);
  if (err == H_MSG_OK) HcStoreICL(ph,0,nDeviceIndex);
  if (err == H_MSG_OK) HcStoreICSEnc(ph,1,strKey);
  if (err == H_MSG_OK) HcStoreICL(ph,2,nValue);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror Hik_openCamera(const char *Name, Hlong TimeSharingFlicker, Hlong QueueHandle, Hlong *CameraHandle)
{
  Hproc_handle ph;
  Herror err;
  err = HcPreCallUser(2,&ph);
  if (err == H_MSG_OK) HcStoreICSEnc(ph,0,Name);
  if (err == H_MSG_OK) HcStoreICL(ph,1,TimeSharingFlicker);
  if (err == H_MSG_OK) HcStoreICL(ph,2,QueueHandle);
  if (err == H_MSG_OK)
  {
    HcInitOCL(ph,0);
    err = HcCall(ph);
  }
  err = HcStoreOCL(ph,0,CameraHandle,err);
  return HcPostCall(ph,err);
}

HUserExport Herror Hik_SetEnumsParameters(Hlong nDeviceIndex, const char *strKey, Hlong nValue)
{
  Hproc_handle ph;
  Herror err;
  err = HcPreCallUser(3,&ph);
  if (err == H_MSG_OK) HcStoreICL(ph,0,nDeviceIndex);
  if (err == H_MSG_OK) HcStoreICSEnc(ph,1,strKey);
  if (err == H_MSG_OK) HcStoreICL(ph,2,nValue);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror Hik_SetIntParameters(Hlong nDeviceIndex, const char *strKey, Hlong nValue)
{
  Hproc_handle ph;
  Herror err;
  err = HcPreCallUser(4,&ph);
  if (err == H_MSG_OK) HcStoreICL(ph,0,nDeviceIndex);
  if (err == H_MSG_OK) HcStoreICSEnc(ph,1,strKey);
  if (err == H_MSG_OK) HcStoreICL(ph,2,nValue);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror Hik_SetCommandParameters(Hlong nDeviceIndex, const char *strKey)
{
  Hproc_handle ph;
  Herror err;
  err = HcPreCallUser(5,&ph);
  if (err == H_MSG_OK) HcStoreICL(ph,0,nDeviceIndex);
  if (err == H_MSG_OK) HcStoreICSEnc(ph,1,strKey);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror Hik_SetfloatParameters(Hlong nDeviceIndex, const char *strKey, double fValue)
{
  Hproc_handle ph;
  Herror err;
  err = HcPreCallUser(6,&ph);
  if (err == H_MSG_OK) HcStoreICL(ph,0,nDeviceIndex);
  if (err == H_MSG_OK) HcStoreICSEnc(ph,1,strKey);
  if (err == H_MSG_OK) HcStoreICD(ph,2,fValue);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror Hik_StartPhotograph(Hlong nDeviceIndex)
{
  Hproc_handle ph;
  Herror err;
  err = HcPreCallUser(7,&ph);
  if (err == H_MSG_OK) HcStoreICL(ph,0,nDeviceIndex);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror Hik_closeCamera(Hlong nDeviceIndex)
{
  Hproc_handle ph;
  Herror err;
  err = HcPreCallUser(8,&ph);
  if (err == H_MSG_OK) HcStoreICL(ph,0,nDeviceIndex);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror Hik_StopPhotograph(Hlong nDeviceIndex)
{
  Hproc_handle ph;
  Herror err;
  err = HcPreCallUser(9,&ph);
  if (err == H_MSG_OK) HcStoreICL(ph,0,nDeviceIndex);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

